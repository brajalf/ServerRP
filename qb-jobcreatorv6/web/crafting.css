* { box-sizing: border-box; user-select: none; }
body { margin: 0; font-family: Inter, system-ui, Arial; background: transparent; }

:root {
  --bg: rgba(7,20,18,.92);
  --accent: #53a88c;
  --accent-alt: #2f7a62;
  --text: #e8f0ef;
  --muted: #cfe3e0;
  --panel: #0e1917;
  --panel-alt: #0d1715;
  --danger: #512e2e;
}

.hidden { display: none !important; }

.craft-app {
  position: absolute; inset: 5% 5%; background: var(--bg);
  border: 1px solid rgba(255,255,255,.08); border-radius: 12px;
  color: var(--text); display: grid; grid-template-columns: 1fr 320px; grid-template-rows: auto auto 1fr;
  gap: 12px; padding: 16px; overflow: hidden;
}

.craft-app .header { grid-column: 1 / span 2; display: flex; align-items: center; justify-content: space-between; }
.craft-app .title { font-size: 24px; letter-spacing: .5px; display: flex; align-items: center; gap: 10px; }
.craft-app .tag { font-size: 12px; background: var(--accent-alt); padding: 4px 8px; border-radius: 999px; border: 1px solid rgba(255,255,255,.08); }

.craft-app .search { position: relative; }
.craft-app .search input {
  background: var(--panel-alt); color: var(--muted); border: 1px solid rgba(255,255,255,.1);
  padding: 10px 34px 10px 12px; border-radius: 8px; width: 260px; outline: none;
}
.craft-app .search i { position: absolute; right: 10px; top: 10px; opacity: .7; }

.craft-app .statusBar { grid-column: 1 / span 2; display: grid; grid-template-columns: 1fr 140px; gap: 10px; align-items: center; }
.craft-app .progress { height: 18px; background: var(--panel-alt); border: 1px solid rgba(255,255,255,.08); border-radius: 8px; overflow: hidden; }
.craft-app .progress > div { height: 100%; width: 0%; background: linear-gradient(90deg,var(--accent),var(--accent-alt)); transition: width .2s; }
.craft-app .time { font-size: 12px; opacity: .8; text-align: right; }

.craft-app .grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; padding-bottom: 12px; overflow: auto; }
.craft-app .card {
  background: var(--panel); border: 1px solid rgba(255,255,255,.08); border-radius: 12px; padding: 12px;
  display: grid; grid-template-rows: auto auto auto; gap: 6px;
}
.craft-app .card .img { height: 96px; display: grid; place-items: center; }
.craft-app .card .img img { width: 96px; height: 96px; object-fit: contain; filter: drop-shadow(0 0 10px rgba(0,0,0,.2)); }

.craft-app .card .title { text-align: center; font-weight: 600; }
.craft-app .card .hint { font-size: 12px; opacity: .7; text-align: center; }
.craft-app .card .qtyRow { display: grid; grid-template-columns: 32px 1fr 32px; gap: 6px; align-items: center; }
.craft-app .small { height: 32px; background: var(--panel); border: 1px solid rgba(255,255,255,.08); color: var(--muted); border-radius: 8px; }
.craft-app .card .btn { margin-top: 6px; }

.craft-app .card.locked { filter: grayscale(100%); opacity: .65; }
.craft-app .card .lock { position: absolute; top: 8px; right: 8px; font-size: 14px; opacity: .8; }

.craft-app .btn {
  width: 100%; padding: 10px 12px; border-radius: 8px; border: 1px solid rgba(255,255,255,.12);
  background: var(--accent-alt); color: var(--text); font-weight: 700; cursor: pointer;
}
.craft-app .btn.primary { background: linear-gradient(90deg,var(--accent),var(--accent-alt)); }
.craft-app .btn.danger { background: var(--danger); }

.craft-app .sidebar { overflow: auto; display: grid; grid-auto-rows: min-content; gap: 12px; }
.craft-app .panel { background:var(--panel); border: 1px solid rgba(255,255,255,.08); border-radius: 12px; padding: 10px; }
.craft-app .panel-title { font-weight: 700; margin-bottom: 8px; }
.craft-app .panel-body { display: grid; gap: 6px; }
.craft-app .panel-body.empty { opacity: .7; font-size: 13px; }

.craft-app .queueItem, .craft-app .collectItem {
  display: grid; grid-template-columns: 36px 1fr auto; align-items: center; gap: 8px;
  padding: 8px; border: 1px solid rgba(255,255,255,.06); border-radius: 10px; background: var(--panel-alt);
}
.craft-app .badge { background: var(--accent-alt); padding: 2px 6px; border-radius: 6px; font-size: 11px; }

.craft-modal { position: fixed; inset: 0; background: rgba(0,0,0,.45); display: grid; place-items: center; }
.craft-modal .modal-inner { width: 540px; background:var(--panel-alt); border:1px solid rgba(255,255,255,.1); border-radius: 12px; overflow: hidden; }
.craft-modal .modal-header { display: flex; align-items: center; justify-content: space-between; padding: 12px 16px; border-bottom: 1px solid rgba(255,255,255,.08); }
.craft-modal .xbtn { background: transparent; border: 0; color: var(--text); font-size: 18px; cursor: pointer; }

.craft-modal .modal-body { padding: 12px 16px; display: grid; gap: 10px; }
.craft-app .mats, .craft-app .outs { display: grid; gap: 8px; }
.craft-app .mat, .craft-app .out { display: grid; grid-template-columns: 40px 1fr auto; gap: 8px; align-items: center; }
.craft-app .mats .need { font-size: 12px; opacity: .8; }
.craft-app .qty { display: grid; grid-template-columns: 48px 1fr 48px; gap: 8px; }
.craft-app .qty input { background:var(--panel-alt); border:1px solid rgba(255,255,255,.08); color:var(--muted); padding:8px; border-radius:8px; text-align:center; }

.craft-app .state-all { outline: 2px solid #45d483; }
.craft-app .state-some { outline: 2px solid #d1b73f; }
.craft-app .state-none { outline: 2px solid #c24b4b; }
